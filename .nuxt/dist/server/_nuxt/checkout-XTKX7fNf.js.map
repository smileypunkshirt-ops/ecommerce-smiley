{"version":3,"file":"checkout-XTKX7fNf.js","sources":["../../../../pages/checkout.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { storeToRefs } from \"pinia\";\nimport { useCartStore } from \"~/stores/cart\";\n\nuseHead({\n  title: \"Checkout | Smiley Punk\"\n});\n\nconst cart = useCartStore();\nconst { cart: cartPayload, items, loading, error, itemCount } = storeToRefs(cart);\n\nuseAsyncData(\"checkout-cart\", () => cart.fetchCart(), { server: false });\n\nconst showLoader = ref(true);\n\nonMounted(() => {\n  setTimeout(() => {\n    showLoader.value = false;\n  }, 2000);\n});\n\nconst activePanel = ref(\"shipping\");\n\nconst form = reactive({\n  firstName: \"\",\n  lastName: \"\",\n  email: \"\",\n  phone: \"\",\n  address: \"\",\n  city: \"\",\n  state: \"\",\n  postalCode: \"\",\n  country: \"Mexico\"\n});\n\nconst payment = reactive({\n  method: \"card\",\n  cardName: \"\",\n  cardNumber: \"\",\n  cardExpiry: \"\",\n  cardCvc: \"\"\n});\n\nconst orderLoading = ref(false);\nconst orderError = ref(\"\");\nconst orderSuccess = ref(\"\");\nconst orderCompleted = ref(false);\nconst orderNumber = ref<number | null>(null);\n\nconst formatCardNumber = (value: string) => {\n  return value\n    .replace(/\\D/g, \"\")\n    .slice(0, 16)\n    .replace(/(\\d{4})(?=\\d)/g, \"$1 \");\n};\n\nconst formatCardExpiry = (value: string) => {\n  const digits = value.replace(/\\D/g, \"\").slice(0, 4);\n  if (digits.length <= 2) return digits;\n  return `${digits.slice(0, 2)}/${digits.slice(2)}`;\n};\n\nconst onCardNumberInput = (event: Event) => {\n  const target = event.target as HTMLInputElement | null;\n  if (!target) return;\n  payment.cardNumber = formatCardNumber(target.value);\n};\n\nconst onCardExpiryInput = (event: Event) => {\n  const target = event.target as HTMLInputElement | null;\n  if (!target) return;\n  payment.cardExpiry = formatCardExpiry(target.value);\n};\n\nconst isShippingComplete = computed(() => {\n  return (\n    form.firstName.trim() &&\n    form.lastName.trim() &&\n    form.email.trim().includes(\"@\") &&\n    form.phone.trim() &&\n    form.address.trim() &&\n    form.city.trim() &&\n    form.state.trim() &&\n    form.postalCode.trim() &&\n    form.country.trim()\n  );\n});\n\nconst isPaymentComplete = computed(() => {\n  if (payment.method !== \"card\") return true;\n  return (\n    payment.cardName.trim() &&\n    payment.cardNumber.trim() &&\n    payment.cardExpiry.trim() &&\n    payment.cardCvc.trim()\n  );\n});\n\nconst canShowPayment = computed(() => Boolean(isShippingComplete.value));\nconst canShowReview = computed(() => Boolean(isShippingComplete.value && isPaymentComplete.value));\n\nconst resolvePanel = (panel: string) => {\n  if (panel === \"payment\" && !canShowPayment.value) return \"shipping\";\n  if (panel === \"review\" && !canShowReview.value) {\n    return canShowPayment.value ? \"payment\" : \"shipping\";\n  }\n  return panel;\n};\n\nconst togglePanel = (panel: string) => {\n  const target = resolvePanel(panel);\n  activePanel.value = activePanel.value === target ? \"\" : target;\n};\n\nconst openPanel = (panel: string) => {\n  activePanel.value = resolvePanel(panel);\n};\n\nwatch([canShowPayment, canShowReview], () => {\n  if (activePanel.value === \"review\" && !canShowReview.value) {\n    activePanel.value = canShowPayment.value ? \"payment\" : \"shipping\";\n    return;\n  }\n  if (activePanel.value === \"payment\" && !canShowPayment.value) {\n    activePanel.value = \"shipping\";\n  }\n});\n\nconst resolveQuantity = (value: unknown, fallback = 1) => {\n  if (typeof value === \"number\") return Number.isFinite(value) && value > 0 ? value : fallback;\n  if (typeof value === \"string\") {\n    const parsed = Number(value);\n    return Number.isFinite(parsed) && parsed > 0 ? parsed : fallback;\n  }\n  if (value && typeof value === \"object\") {\n    const record = value as Record<string, unknown>;\n    const candidates = [record.value, record.qty, record.quantity];\n    for (const candidate of candidates) {\n      const parsed = Number(candidate);\n      if (Number.isFinite(parsed) && parsed > 0) return parsed;\n    }\n  }\n  return fallback;\n};\n\nconst lineItems = computed(() => {\n  return (items.value as Array<Record<string, unknown>>).map((item, index) => {\n    const key = String(\n      item.key || item.item_key || item.cart_item_key || item.id || item.product_id || index\n    );\n    const name = String(item.name || item.title || \"Producto\");\n    const quantity = resolveQuantity(item.quantity ?? item.qty ?? 1, 1);\n    const lineTotal = (item.totals?.total || item.line_total || item.line_total_raw || item.price) as\n      | string\n      | number\n      | undefined;\n\n    return { key, name, quantity, lineTotal };\n  });\n});\n\nconst orderLineItems = computed(() => {\n  return (items.value as Array<Record<string, unknown>>)\n    .map((item, index) => {\n      const rawProductId = item.product_id ?? item.productId ?? item.id;\n      const rawVariationId = item.variation_id ?? item.variationId;\n      const productId = Number(rawProductId);\n      const variationId = Number(rawVariationId);\n      const quantity = resolveQuantity(item.quantity ?? item.qty ?? 1, 1);\n\n      if (!Number.isFinite(productId)) return null;\n\n      return {\n        product_id: productId,\n        variation_id: Number.isFinite(variationId) ? variationId : undefined,\n        quantity\n      };\n    })\n    .filter(Boolean) as Array<{ product_id: number; variation_id?: number; quantity: number }>;\n});\n\nconst resolveCountryCode = (value: string) => {\n  const normalized = value.trim().toLowerCase();\n  if (normalized === \"mexico\" || normalized === \"méxico\") return \"MX\";\n  if (normalized === \"estados unidos\" || normalized === \"usa\" || normalized === \"us\") return \"US\";\n  if (normalized === \"canada\" || normalized === \"canadá\") return \"CA\";\n  return value;\n};\n\nconst placeOrder = async () => {\n  orderError.value = \"\";\n  orderSuccess.value = \"\";\n\n  if (!isShippingComplete.value) {\n    orderError.value = \"Completa los datos de envio para continuar.\";\n    activePanel.value = \"shipping\";\n    return;\n  }\n\n  if (!isPaymentComplete.value) {\n    orderError.value = \"Completa los datos de pago para continuar.\";\n    activePanel.value = \"payment\";\n    return;\n  }\n\n  if (!orderLineItems.value.length) {\n    orderError.value = \"Tu carrito esta vacio.\";\n    return;\n  }\n\n  orderLoading.value = true;\n  try {\n    const country = resolveCountryCode(form.country);\n    const payload = {\n      payment_method: payment.method,\n      payment_method_title: payment.method === \"card\" ? \"Tarjeta\" : \"Pago\",\n      set_paid: false,\n      billing: {\n        first_name: form.firstName,\n        last_name: form.lastName,\n        address_1: form.address,\n        city: form.city,\n        state: form.state,\n        postcode: form.postalCode,\n        country,\n        email: form.email,\n        phone: form.phone\n      },\n      shipping: {\n        first_name: form.firstName,\n        last_name: form.lastName,\n        address_1: form.address,\n        city: form.city,\n        state: form.state,\n        postcode: form.postalCode,\n        country\n      },\n      line_items: orderLineItems.value\n    };\n\n    const response = await $fetch<{ id?: number }>(\"/api/checkout/order\", {\n      method: \"POST\",\n      body: payload\n    });\n\n    orderNumber.value = response?.id ?? null;\n    orderSuccess.value = response?.id\n      ? `Pedido creado con folio #${response.id}.`\n      : \"Pedido creado correctamente.\";\n    orderCompleted.value = true;\n  } catch (err) {\n    orderError.value = err instanceof Error ? err.message : \"No se pudo crear el pedido.\";\n  } finally {\n    orderLoading.value = false;\n  }\n};\n\nconst currencyMeta = computed(() => {\n  const payload = (cartPayload.value as Record<string, unknown>) || {};\n  const currency = (payload.currency as Record<string, unknown>) || {};\n  const minorUnit = Number(currency.currency_minor_unit ?? currency.decimals ?? 2);\n\n  return {\n    symbol: String(payload.currency_symbol || currency.symbol || \"$\"),\n    decimalSeparator: String(currency.decimal_separator || \".\"),\n    thousandSeparator: String(currency.thousand_separator || \",\"),\n    symbolPosition: String(currency.currency_symbol_position || currency.symbol_position || \"left\"),\n    minorUnit: Number.isFinite(minorUnit) ? minorUnit : 2\n  };\n});\n\nconst useMinorUnits = computed(() => {\n  const payload = (cartPayload.value as Record<string, unknown>) || {};\n  const totals = payload.totals as Record<string, unknown> | undefined;\n  if (!totals) return false;\n  const values = Object.values(totals).filter(\n    (value) => typeof value === \"string\" || typeof value === \"number\"\n  );\n  if (values.length === 0) return false;\n  const { decimalSeparator } = currencyMeta.value;\n\n  return !values.some((value) => {\n    if (typeof value === \"number\") return !Number.isInteger(value);\n    const text = value.trim();\n    return text.includes(decimalSeparator) || text.includes(\".\");\n  });\n});\n\nconst parseAmount = (amount?: string | number | null) => {\n  if (amount === undefined || amount === null) return null;\n  if (typeof amount === \"number\") return amount;\n  const text = amount.trim();\n  if (!text) return null;\n\n  const { decimalSeparator, thousandSeparator, minorUnit } = currencyMeta.value;\n  const escapedDecimal = decimalSeparator.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n  const escapedThousand = thousandSeparator.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n  const allowed = new RegExp(`[^0-9\\\\-\\\\${escapedDecimal}\\\\${escapedThousand}]`, \"g\");\n  let cleaned = text.replace(allowed, \"\");\n\n  if (thousandSeparator) {\n    cleaned = cleaned.replace(new RegExp(escapedThousand, \"g\"), \"\");\n  }\n  if (decimalSeparator && decimalSeparator !== \".\") {\n    cleaned = cleaned.replace(new RegExp(escapedDecimal, \"g\"), \".\");\n  }\n\n  const hasDecimal = cleaned.includes(\".\");\n  const numeric = Number(cleaned);\n  if (!Number.isFinite(numeric)) return null;\n\n  if (!hasDecimal && useMinorUnits.value && minorUnit > 0) {\n    return numeric / Math.pow(10, minorUnit);\n  }\n\n  return numeric;\n};\n\nconst formatMoney = (amount?: string | number | null) => {\n  const meta = currencyMeta.value;\n  const parsed = parseAmount(amount);\n  if (parsed === null) return `${meta.symbol}0.00`;\n\n  const isNegative = parsed < 0;\n  const absolute = Math.abs(parsed);\n  const fixed = absolute.toFixed(meta.minorUnit);\n  const [integerPart, decimalPart] = fixed.split(\".\");\n  const withThousands = integerPart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, meta.thousandSeparator);\n  const formattedNumber =\n    meta.minorUnit > 0 ? `${withThousands}${meta.decimalSeparator}${decimalPart}` : withThousands;\n  const withSymbol =\n    meta.symbolPosition === \"right\" ? `${formattedNumber}${meta.symbol}` : `${meta.symbol}${formattedNumber}`;\n\n  return isNegative ? `-${withSymbol}` : withSymbol;\n};\n\nconst subtotal = computed(() => {\n  return (\n    (cartPayload.value as Record<string, unknown>)?.totals?.subtotal ||\n    (cartPayload.value as Record<string, unknown>)?.subtotal ||\n    0\n  );\n});\n\nconst taxTotal = computed(() => {\n  return (\n    (cartPayload.value as Record<string, unknown>)?.totals?.total_tax ||\n    (cartPayload.value as Record<string, unknown>)?.total_tax ||\n    0\n  );\n});\n\nconst shippingTotal = computed(() => {\n  return (\n    (cartPayload.value as Record<string, unknown>)?.totals?.shipping_total ||\n    (cartPayload.value as Record<string, unknown>)?.shipping_total ||\n    0\n  );\n});\n\nconst discountTotal = computed(() => {\n  return (\n    (cartPayload.value as Record<string, unknown>)?.totals?.discount_total ||\n    (cartPayload.value as Record<string, unknown>)?.discount_total ||\n    0\n  );\n});\n\nconst orderTotal = computed(() => {\n  return (\n    (cartPayload.value as Record<string, unknown>)?.totals?.total ||\n    (cartPayload.value as Record<string, unknown>)?.total ||\n    0\n  );\n});\n</script>\n\n<template>\n  <div class=\"page\">\n    <div class=\"container\">\n      <div v-if=\"showLoader\" class=\"checkout-loader\" aria-live=\"polite\">\n        <div class=\"loader-spinner\" />\n        <p class=\"hero-subtitle\">Preparando checkout...</p>\n      </div>\n      <Transition name=\"checkout-fade\">\n        <div v-if=\"!showLoader\" class=\"checkout-content\">\n          <AppHeader centered />\n\n          <div class=\"checkout-back-row\">\n            <NuxtLink class=\"pdp-back\" to=\"/cart\">Regresar al carrito</NuxtLink>\n          </div>\n\n          <div class=\"checkout-title-row\">\n            <h1 class=\"hero-title\">Checkout</h1>\n          </div>\n\n          <div v-if=\"orderCompleted\" class=\"order-complete\">\n            <div class=\"order-complete-card\">\n              <span class=\"badge\">Pedido confirmado</span>\n              <h2 class=\"hero-title\">Gracias por tu compra</h2>\n              <p class=\"hero-subtitle\">\n                {{ orderNumber ? `Tu folio es #${orderNumber}.` : \"Tu pedido fue creado exitosamente.\" }}\n              </p>\n              <div class=\"order-complete-actions\">\n                <NuxtLink class=\"btn btn-primary\" to=\"/\">Seguir comprando</NuxtLink>\n                <NuxtLink class=\"btn btn-secondary\" to=\"/cart\">Ver carrito</NuxtLink>\n              </div>\n            </div>\n            <aside class=\"checkout-summary\">\n              <h2 class=\"section-title\">Resumen</h2>\n              <div v-if=\"lineItems.length\" class=\"summary-items\">\n                <div v-for=\"item in lineItems\" :key=\"item.key\" class=\"summary-item\">\n                  <div>\n                    <strong>{{ item.name }}</strong>\n                    <p class=\"hero-subtitle\">Cantidad: {{ item.quantity }}</p>\n                  </div>\n                  <span>{{ formatMoney(item.lineTotal) }}</span>\n                </div>\n              </div>\n              <div class=\"summary-row\">\n                <span>Subtotal</span>\n                <span>{{ formatMoney(subtotal) }}</span>\n              </div>\n              <div class=\"summary-row\">\n                <span>Descuento</span>\n                <span>- {{ formatMoney(discountTotal) }}</span>\n              </div>\n              <div class=\"summary-row\">\n                <span>Envio</span>\n                <span>{{ formatMoney(shippingTotal) }}</span>\n              </div>\n              <div class=\"summary-row\">\n                <span>Impuestos</span>\n                <span>{{ formatMoney(taxTotal) }}</span>\n              </div>\n              <div class=\"summary-total\">\n                <span>Total</span>\n                <strong>{{ formatMoney(orderTotal) }}</strong>\n              </div>\n            </aside>\n          </div>\n\n          <div v-else class=\"checkout-layout\">\n            <section class=\"checkout-accordion\">\n              <div class=\"accordion-item\" :class=\"{ open: activePanel === 'shipping' }\">\n                <button\n                  class=\"accordion-header\"\n                  type=\"button\"\n                  :aria-expanded=\"activePanel === 'shipping'\"\n                  @click=\"togglePanel('shipping')\"\n                >\n                  1. Datos de envio\n                </button>\n                <Transition name=\"accordion\">\n                  <div v-if=\"activePanel === 'shipping'\" class=\"accordion-panel\">\n                    <div class=\"form-grid\">\n                      <label class=\"form-field\">\n                        Nombre\n                        <input v-model=\"form.firstName\" type=\"text\" placeholder=\"Andrea\" />\n                      </label>\n                      <label class=\"form-field\">\n                        Apellido\n                        <input v-model=\"form.lastName\" type=\"text\" placeholder=\"Lopez\" />\n                      </label>\n                      <label class=\"form-field\">\n                        Email\n                        <input v-model=\"form.email\" type=\"email\" placeholder=\"hola@correo.com\" />\n                      </label>\n                      <label class=\"form-field\">\n                        Telefono\n                        <input v-model=\"form.phone\" type=\"tel\" placeholder=\"55 1234 5678\" />\n                      </label>\n                      <label class=\"form-field form-field-full\">\n                        Direccion\n                        <input v-model=\"form.address\" type=\"text\" placeholder=\"Calle 123, Colonia\" />\n                      </label>\n                      <label class=\"form-field\">\n                        Ciudad\n                        <input v-model=\"form.city\" type=\"text\" placeholder=\"CDMX\" />\n                      </label>\n                      <label class=\"form-field\">\n                        Estado\n                        <input v-model=\"form.state\" type=\"text\" placeholder=\"Ciudad de Mexico\" />\n                      </label>\n                      <label class=\"form-field\">\n                        Codigo postal\n                        <input v-model=\"form.postalCode\" type=\"text\" placeholder=\"01000\" />\n                      </label>\n                      <label class=\"form-field\">\n                        Pais\n                        <select v-model=\"form.country\">\n                          <option>Mexico</option>\n                          <option>Estados Unidos</option>\n                          <option>Canada</option>\n                        </select>\n                      </label>\n                    </div>\n                    <div class=\"accordion-actions\">\n                      <button class=\"btn btn-secondary\" type=\"button\" @click=\"openPanel('payment')\">\n                        Continuar a pago\n                      </button>\n                    </div>\n                  </div>\n                </Transition>\n              </div>\n\n              <div\n                v-if=\"canShowPayment\"\n                class=\"accordion-item\"\n                :class=\"{ open: activePanel === 'payment' }\"\n              >\n                <button\n                  class=\"accordion-header\"\n                  type=\"button\"\n                  :aria-expanded=\"activePanel === 'payment'\"\n                  @click=\"togglePanel('payment')\"\n                >\n                  2. Metodo de pago\n                </button>\n                <Transition name=\"accordion\">\n                  <div v-if=\"activePanel === 'payment'\" class=\"accordion-panel\">\n                    <div class=\"form-grid\">\n                      <label class=\"form-field form-field-full\">\n                        Metodo\n                        <select v-model=\"payment.method\">\n                          <option value=\"card\">Tarjeta</option>\n                          <option value=\"transfer\">Transferencia</option>\n                          <option value=\"cash\">Pago en efectivo</option>\n                        </select>\n                      </label>\n                      <label class=\"form-field form-field-full\">\n                        Nombre en tarjeta\n                        <input v-model=\"payment.cardName\" type=\"text\" placeholder=\"Andrea Lopez\" />\n                      </label>\n                      <label class=\"form-field form-field-full\">\n                        Numero de tarjeta\n                        <input\n                          :value=\"payment.cardNumber\"\n                          type=\"text\"\n                          inputmode=\"numeric\"\n                          autocomplete=\"cc-number\"\n                          placeholder=\"4242 4242 4242 4242\"\n                          @input=\"onCardNumberInput\"\n                        />\n                      </label>\n                    <label class=\"form-field\">\n                      Expiracion\n                      <input\n                        :value=\"payment.cardExpiry\"\n                        type=\"text\"\n                        inputmode=\"numeric\"\n                        autocomplete=\"cc-exp\"\n                        placeholder=\"MM/AA\"\n                        @input=\"onCardExpiryInput\"\n                      />\n                    </label>\n                      <label class=\"form-field\">\n                        CVC\n                        <input v-model=\"payment.cardCvc\" type=\"text\" placeholder=\"123\" />\n                      </label>\n                    </div>\n                    <div class=\"accordion-actions\">\n                      <button class=\"btn btn-secondary\" type=\"button\" @click=\"openPanel('review')\">\n                        Revisar pedido\n                      </button>\n                    </div>\n                  </div>\n                </Transition>\n              </div>\n\n              <div v-if=\"canShowReview\" class=\"accordion-item\" :class=\"{ open: activePanel === 'review' }\">\n                <button\n                  class=\"accordion-header\"\n                  type=\"button\"\n                  :aria-expanded=\"activePanel === 'review'\"\n                  @click=\"togglePanel('review')\"\n                >\n                  3. Confirmacion\n                </button>\n                <Transition name=\"accordion\">\n                  <div v-if=\"activePanel === 'review'\" class=\"accordion-panel\">\n                    <p class=\"hero-subtitle\">\n                      Revisa tu informacion y confirma el pedido. El checkout final se conectara con WooCommerce.\n                    </p>\n                    <div class=\"accordion-actions\">\n                      <button\n                        class=\"btn btn-primary\"\n                        type=\"button\"\n                        :disabled=\"loading || orderLoading || lineItems.length === 0\"\n                        @click=\"placeOrder\"\n                      >\n                        {{ orderLoading ? \"Procesando...\" : \"Realizar pedido\" }}\n                      </button>\n                    </div>\n                    <p v-if=\"orderError\" class=\"hero-subtitle\">{{ orderError }}</p>\n                    <p v-if=\"orderSuccess\" class=\"hero-subtitle\">{{ orderSuccess }}</p>\n                  </div>\n                </Transition>\n              </div>\n            </section>\n\n            <aside class=\"checkout-summary\">\n              <h2 class=\"section-title\">Resumen</h2>\n              <p v-if=\"loading\">Cargando resumen...</p>\n              <p v-if=\"error\" class=\"hero-subtitle\">{{ error }}</p>\n              <div v-if=\"lineItems.length\" class=\"summary-items\">\n                <div v-for=\"item in lineItems\" :key=\"item.key\" class=\"summary-item\">\n                  <div>\n                    <strong>{{ item.name }}</strong>\n                    <p class=\"hero-subtitle\">Cantidad: {{ item.quantity }}</p>\n                  </div>\n                  <span>{{ formatMoney(item.lineTotal) }}</span>\n                </div>\n              </div>\n              <div v-else class=\"cart-empty\">Tu carrito esta vacio.</div>\n              <div class=\"summary-row\">\n                <span>Subtotal</span>\n                <span>{{ formatMoney(subtotal) }}</span>\n              </div>\n              <div class=\"summary-row\">\n                <span>Descuento</span>\n                <span>- {{ formatMoney(discountTotal) }}</span>\n              </div>\n              <div class=\"summary-row\">\n                <span>Envio</span>\n                <span>{{ formatMoney(shippingTotal) }}</span>\n              </div>\n              <div class=\"summary-row\">\n                <span>Impuestos</span>\n                <span>{{ formatMoney(taxTotal) }}</span>\n              </div>\n              <div class=\"summary-total\">\n                <span>Total</span>\n                <strong>{{ formatMoney(orderTotal) }}</strong>\n              </div>\n            </aside>\n          </div>\n        </div>\n      </Transition>\n    </div>\n  </div>\n</template>\n"],"names":["_ssrRenderAttrs","_mergeProps","_unref","_ssrRenderComponent","_push","_parent","_ssrInterpolate","_ssrRenderList","_ssrRenderAttr","_ssrIncludeBooleanAttr","_ssrLooseContain","_ssrLooseEqual"],"mappings":"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"}